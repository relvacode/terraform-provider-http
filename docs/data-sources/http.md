---
page_title: "http Data Source - terraform-provider-http"
subcategory: ""
description: |-
  The http data source makes an HTTP GET request to the given URL and exports
  information about the response.
  The given URL may be either an http or https URL. At present this resource
  can only retrieve data from URLs that respond with text/* or
  application/json content types, and expects the result to be UTF-8 encoded
  regardless of the returned content type header.
  ~> Important Although https URLs can be used, there is currently no
  mechanism to authenticate the remote server except for general verification of
  the server certificate's chain of trust. Data retrieved from servers not under
  your control should be treated as untrustworthy.
---

# http (Data Source)

The `http` data source makes an HTTP GET request to the given URL and exports
information about the response.

The given URL may be either an `http` or `https` URL. At present this resource
can only retrieve data from URLs that respond with `text/*` or
`application/json` content types, and expects the result to be UTF-8 encoded
regardless of the returned content type header.

~> **Important** Although `https` URLs can be used, there is currently no
mechanism to authenticate the remote server except for general verification of
the server certificate's chain of trust. Data retrieved from servers not under
your control should be treated as untrustworthy.

## Example Usage

```terraform
# The following example shows how to issue an HTTP GET request supplying
# an optional request header.
data "http" "example" {
  url = "https://checkpoint-api.hashicorp.com/v1/check/terraform"

  # Optional request headers
  request_headers = {
    Accept = "application/json"
  }
}
```

## Usage with Postcondition

[Precondition and Postcondition](https://www.terraform.io/language/expressions/custom-conditions)
checks are available with Terraform v1.2.0 and later.

```terraform
data "http" "example" {
  url = "https://checkpoint-api.hashicorp.com/v1/check/terraform"

  # Optional request headers
  request_headers = {
    Accept = "application/json"
  }

  lifecycle {
    postcondition {
      condition     = contains([201, 204], self.status_code)
      error_message = "Status code invalid"
    }
  }
}
```

## Usage with Precondition

[Precondition and Postcondition](https://www.terraform.io/language/expressions/custom-conditions)
checks are available with Terraform v1.2.0 and later.

```terraform
data "http" "example" {
  url = "https://checkpoint-api.hashicorp.com/v1/check/terraform"

  # Optional request headers
  request_headers = {
    Accept = "application/json"
  }
}

resource "random_uuid" "example" {
  lifecycle {
    precondition {
      condition     = contains([201, 204], data.http.example.status_code)
      error_message = "Status code invalid"
    }
  }
}
```

## Usage with Provisioner

[Failure Behaviour](https://www.terraform.io/language/resources/provisioners/syntax#failure-behavior)
can be leveraged within a provisioner in order to raise an error and stop applying.

```terraform
data "http" "example" {
  url = "https://checkpoint-api.hashicorp.com/v1/check/terraform"

  # Optional request headers
  request_headers = {
    Accept = "application/json"
  }
}

resource "null_resource" "example" {
  # On success, this will attempt to execute the true command in the
  # shell environment running terraform.
  # On failure, this will attempt to execute the false command in the
  # shell environment running terraform.
  provisioner "local-exec" {
    command = contains([201, 204], data.http.example.status_code)
  }
}
```

## Usage with HTTP redirects

```terraform
# The following example shows how to disable automatic following of HTTP redirects.
# The default behaviour is to recursively follow HTTP redirects until a response no longer returns a redirect 3XX response code.
data "http" "example" {
  url = "https://checkpoint-api.hashicorp.com/v1/check/terraform"

  # Do not automatically follow HTTP redirects and instead return on the first HTTP response.
  no_follow_redirects = true
}


# Make another HTTP request, this time using the redirect location from the first request.
data "http" "example_redirected_location" {
  lifecycle {
    precondition {
      condition     = contains([302], data.http.example.status_code)
      error_message = "Server did not respond with a 302 Found HTTP redirect"
    }
  }

  url = data.http.example.location
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `url` (String) The URL for the request. Supported schemes are `http` and `https`.

### Optional

- `method` (String) The HTTP Method for the request. Allowed methods are a subset of methods defined in [RFC7231](https://datatracker.ietf.org/doc/html/rfc7231#section-4.3) namely, `GET`, `HEAD`, and `POST`. `POST` support is only intended for read-only URLs, such as submitting a search.
- `no_follow_redirects` (Boolean) Do not follow HTTP redirects.
- `request_body` (String) The request body as a string.
- `request_headers` (Map of String) A map of request header field names and values.

### Read-Only

- `body` (String, Deprecated) The response body returned as a string. **NOTE**: This is deprecated, use `response_body` instead.
- `id` (String) The URL used for the request.
- `location` (String) The URL from the request that was sent to obtain the final response. If the final server response included a Location header then this value is set to the absolute path of that location, relative to the URL that made the request.
- `response_body` (String) The response body returned as a string.
- `response_headers` (Map of String) A map of response header field names and values. Duplicate headers are concatenated according to [RFC2616](https://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html#sec4.2).
- `status_code` (Number) The HTTP response status code.